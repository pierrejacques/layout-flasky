webpackJsonp([1],{"+Qxf":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload"},[n("router-link",{attrs:{to:{name:"Home"}}},[t._v("回到主页")]),t._v(" "),n("br"),t._v(" "),n("vue-file-upload",{ref:"vueFileUploader",attrs:{url:"/api/image",filters:t.filters,events:t.cbEvents},on:{onAdd:t.onAddItem}}),t._v(" "),n("h1",[t._v(t._s(t.score))])],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},"/KFX":function(t,e,n){"use strict";function a(t){n("1tK0")}var r=n("2X8b"),s=n("H1WU"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,null,null);e.a=c.exports},"/nk8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"url"},[n("router-link",{attrs:{to:{name:"Home"}}},[t._v("回到主页")]),t._v(" "),n("h2",[t._v("输入网站的url以获取该网站的美感评分")]),t._v(" "),n("form",{on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"text",name:"",value:""},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),n("button",{staticClass:"submit-btn",on:{click:t.submit}},[t._v("评分")])]),t._v(" "),n("h1",[t._v(t._s(t.score))])],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},"1tK0":function(t,e){},"2X8b":function(t,e,n){"use strict";var a=n("r8cW");e.a={name:"search",components:{searchBox:a.a}}},"6H07":function(t,e,n){"use strict";function a(t){n("yVs4")}var r=n("ia7H"),s=n("/nk8"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,null,null);e.a=c.exports},"7sXf":function(t,e){},DICR:function(t,e,n){"use strict";e.a={name:"app"}},EPD7:function(t,e){},H1WU:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("router-link",{attrs:{to:{name:"Home"}}},[t._v("回到主页")]),t._v(" "),n("h1",[t._v("输入要搜索的关键词")]),t._v(" "),n("search-box")],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},Iy0J:function(t,e,n){"use strict";e.a={name:"searchBox",data:function(){return{keyword:""}},created:function(){this.keyword=this.$route.params.q||""},methods:{search:function(){this.keyword?(this.$router.push({name:"Results",params:{q:this.keyword}}),this.$emit("search")):this.$router.push({name:"Search"})}}}},Km7D:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("router-link",{attrs:{to:{name:"Upload"}}},[n("div",{staticClass:"demo-entrance"},[t._v("\n        上传图片\n      ")])]),t._v(" "),n("router-link",{attrs:{to:{name:"Url"}}},[n("div",{staticClass:"demo-entrance"},[t._v("\n        输入地址\n      ")])]),t._v(" "),n("router-link",{attrs:{to:{name:"Search"}}},[n("div",{staticClass:"demo-entrance"},[t._v("\n\t\t    搜索关键词\n\t\t  ")])])],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},M93x:function(t,e,n){"use strict";function a(t){n("uxWn")}var r=n("DICR"),s=n("kUra"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,null,null);e.a=c.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("MVSX"),r=n("M93x"),s=n("cHtD");a.a.config.productionTip=!1,new a.a({el:"#app",router:s.a,template:"<App/>",components:{App:r.a}})},NZul:function(t,e,n){"use strict";var a=n("yCh9"),r=n.n(a);e.a={name:"upload",data:function(){var t=this;return{score:"",files:[],filters:[{name:"imageFilter",fn:function(t){return-1!=="|jpg|png|jpeg|".indexOf("|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|")}}],cbEvents:{onCompleteUpload:function(e,n){t.score=n,t.$refs.vueFileUploader.clearAll()}}}},methods:{onAddItem:function(t){this.files=t;var e=this.files[0];e&&this.uploadItem(e)},uploadItem:function(t){t.upload()}},components:{VueFileUpload:r.a}}},PYS9:function(t,e,n){"use strict";e.a={name:"searchResult",props:["data"],data:function(){return{page:1,pageSize:10}},computed:{pageArr:function(){this.page=1;for(var t=Math.ceil(this.data.length/this.pageSize),e=[],n=1;n<=t;n++)e.push(n);return e},pageData:function(){return this.data.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}}}},SXhN:function(t,e,n){"use strict";function a(t){n("7sXf")}var r=n("PYS9"),s=n("UJx0"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,null,null);e.a=c.exports},UJx0:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-result"},[n("ul",{staticClass:"search-results"},t._l(t.pageData,function(e){return n("li",[n("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"score"},[t._v("美感得分："+t._s(e.score))]),t._v(" "),n("p",[t._v(t._s(e.description))])])})),t._v(" "),n("ul",{staticClass:"pagination"},[n("li",[n("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.page=1}}},[t._v("第一页")])]),t._v(" "),n("li",[n("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.page=Math.max(1,t.page-1)}}},[t._v("<")])]),t._v(" "),t._l(t.pageArr,function(e){return n("li",{class:{active:e==t.page}},[n("a",{attrs:{href:""},on:{click:function(n){n.preventDefault(),t.page=e}}},[t._v(t._s(e))])])}),t._v(" "),n("li",[n("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.page=Math.min(t.pageArr.length,t.page+1)}}},[t._v(">")])]),t._v(" "),n("li",[n("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.page=t.pageArr.length}}},[t._v("末页")])])],2),t._v(" "),n("p",[t._v("共有"+t._s(t.data.length)+"项")])])},r=[],s={render:a,staticRenderFns:r};e.a=s},UhH9:function(t,e){},VVxd:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){e.preventDefault(),t.search(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"在此输入你想搜索的内容"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),n("button",{staticClass:"submit-btn",on:{click:t.search}},[t._v("搜索")])])},r=[],s={render:a,staticRenderFns:r};e.a=s},YTlo:function(t,e,n){"use strict";function a(t){n("suEg")}var r=n("Z8Xf"),s=n("ynmA"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,"data-v-64e1306e",null);e.a=c.exports},Z8Xf:function(t,e,n){"use strict";var a=n("gyMJ"),r=n("SXhN"),s=n("r8cW");e.a={name:"search",components:{searchResult:r.a,searchBox:s.a},data:function(){return{keyword:"",data:[]}},created:function(){this.search()},methods:{search:function(){var t=this;a.a.getSearch(this.$route.params.q).then(function(e){t.data=e},function(t){throw t})}}}},cHtD:function(t,e,n){"use strict";var a=n("MVSX"),r=n("zO6J"),s=n("lO7g"),i=n("/KFX"),o=n("jd+X"),c=n("YTlo"),u=n("6H07");a.a.use(r.a),e.a=new r.a({routes:[{path:"/",name:"Home",component:s.a},{path:"/search",name:"Search",component:i.a},{path:"/search/:q",name:"Results",component:c.a},{path:"/upload",name:"Upload",component:o.a},{path:"/url",name:"Url",component:u.a}]})},gyMJ:function(t,e,n){"use strict";var a=n("BMa3"),r=n.n(a),s=n("MVSX"),i=n("pJLX");s.a.prototype.$http=r.a;var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="https://api.cognitive.microsoft.com/bing/v7.0/"+t;return r.a.get(n,{headers:{"Ocp-Apim-Subscription-Key":Object(i.a)()},params:e})},c=function(t){var e=[];t.forEach(function(t){e.push(t.url)});return r.a.post("/api/score",{urls:e})};e.a={getSearch:function(t){return{then:function(e,n){o("news/search",{q:t,count:8}).then(function(t){var a=t.data.value;c(a).then(function(t){t.data.scores.forEach(function(t,e){a[e].score=t}),a.sort(function(t,e){return t.score>e.score?-1:t.score<e.score?1:void 0}),e(a)},function(t){console.error("evaluating server failed"),n()})},function(t){console.error("fail to reach search engine"),n()})}}},getScore:function(t){return r.a.get("api/score",{params:{url:t}})}}},ia7H:function(t,e,n){"use strict";var a=n("gyMJ");e.a={name:"url",data:function(){return{url:"",score:""}},methods:{submit:function(){var t=this;this.url&&a.a.getScore(this.url).then(function(e){t.score=e.data},function(t){console.error(t)})}}}},"jd+X":function(t,e,n){"use strict";var a=n("NZul"),r=n("+Qxf"),s=n("46Yf"),i=s(a.a,r.a,!1,null,null,null);e.a=i.exports},kUra:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],s={render:a,staticRenderFns:r};e.a=s},lO7g:function(t,e,n){"use strict";function a(t){n("UhH9")}var r=n("xM0o"),s=n("Km7D"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,"data-v-40a41f17",null);e.a=c.exports},pJLX:function(t,e,n){"use strict";var a=function(){return"6d4bafa419ce456c81699ea848aae22b"};e.a=a},r8cW:function(t,e,n){"use strict";function a(t){n("EPD7")}var r=n("Iy0J"),s=n("VVxd"),i=n("46Yf"),o=a,c=i(r.a,s.a,!1,o,null,null);e.a=c.exports},suEg:function(t,e){},uxWn:function(t,e){},xM0o:function(t,e,n){"use strict";e.a={name:"home"}},yVs4:function(t,e){},ynmA:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("router-link",{attrs:{to:{name:"Home"}}},[t._v("回到主页")]),t._v(" "),n("search-box",{on:{search:t.search}}),t._v(" "),n("search-result",{attrs:{data:t.data}})],1)},r=[],s={render:a,staticRenderFns:r};e.a=s}},["NHnr"]);
//# sourceMappingURL=app.a42f278f9467830caebd.js.map